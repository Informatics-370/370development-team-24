{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { catchError, map, Subject, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class InventoryService {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.apiUrl = 'http://localhost:49991/api/';\n    this.inventoryItems = [];\n    this.checklistItems = [];\n    // private inventoryItemsChanged$ = new BehaviorSubject<InventoryItem[]>([]);\n    this.inventoryItemsChanged$ = new Subject();\n    // ... Your existing code ...\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        ContentType: 'application/json'\n      })\n    };\n  }\n  //Get All Inventory Items\n  GetAllInventoryItems() {\n    return this.httpClient.get(`${this.apiUrl}InventoryItem/GetAllInventoryItems`).pipe(map(result => result));\n  }\n  GetInventoryItem(inventory_ItemId) {\n    return this.httpClient.get(`${this.apiUrl}InventoryItem/GetInventoryItem` + \"/\" + inventory_ItemId).pipe(map(result => result));\n  }\n  DeleteInventoryItem(inventory_ItemId) {\n    return this.httpClient.delete(`${this.apiUrl}InventoryItem/DeleteInventoryItem` + \"/\" + inventory_ItemId, this.httpOptions);\n  }\n  // EditSupplier(supplierId: Number, supplier: Supplier)\n  // {\n  //   return this.httpClient.put(`${this.apiUrl}Supplier/EditSupplier/${supplierId}`,supplier, this.httpOptions)\n  // }\n  EditInventoryItem(inventory_ItemId, inventoryitem) {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n    return this.httpClient.put(`${this.apiUrl}InventoryItem/EditInventoryItem/${inventory_ItemId}`, inventoryitem, httpOptions);\n  }\n  AddInventoryItem(inventoryitem) {\n    return this.httpClient.post(`${this.apiUrl}InventoryItem/AddInventoryItem`, inventoryitem, this.httpOptions).pipe(catchError(error => {\n      console.error('Error adding inventory item:', error);\n      return throwError(error);\n    }));\n  }\n  UpdateInventoryItem(inventory_ItemId, inventoryitem) {\n    // Perform client-side operations or validations here\n    // Update the item locally\n    const updatedItemIndex = this.inventoryItems.findIndex(item => item.inventory_ItemId === inventory_ItemId);\n    if (updatedItemIndex !== -1) {\n      this.inventoryItems[updatedItemIndex] = inventoryitem;\n      console.log('Inventory item updated successfully.'); // Success message\n    } else {\n      console.log('Failed to update inventory item: Item not found.'); // Error message\n    }\n\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n    return this.httpClient.put(`${this.apiUrl}InventoryItem/UpdateItems/${inventory_ItemId}`, inventoryitem, httpOptions);\n  }\n  // Get Inventory Types\n  GetAllInventoryTypes() {\n    return this.httpClient.get(`${this.apiUrl}InventoryType/GetAllInventoryTypes`).pipe(map(result => result));\n  }\n  GetInventoryType(inventory_TypeId) {\n    return this.httpClient.get(`${this.apiUrl}InventoryType/GetInventoryType` + \"/\" + inventory_TypeId).pipe(map(result => result));\n  }\n  DeleteInventoryType(inventory_TypeId) {\n    return this.httpClient.delete(`${this.apiUrl}InventoryType/DeleteInventoryType` + \"/\" + inventory_TypeId, this.httpOptions);\n  }\n  EditInventoryType(inventory_TypeId, inventorytype) {\n    return this.httpClient.put(`${this.apiUrl}InventoryType/EditInventoryType/${inventory_TypeId}`, inventorytype, this.httpOptions);\n  }\n  AddInventoryType(inventorytype) {\n    return this.httpClient.post(`${this.apiUrl}InventoryType/AddInventoryType`, inventorytype, this.httpOptions);\n  }\n  GetInventoryItemsByType(inventory_TypeId) {\n    return this.httpClient.get(`${this.apiUrl}InventoryItem/items/${inventory_TypeId}`).pipe(catchError(error => {\n      console.error('Error retrieving inventory items:', error);\n      return throwError(error);\n    }));\n  }\n  addItem(item) {\n    this.checklistItems.push(item);\n  }\n  getChecklistItems() {\n    return this.checklistItems;\n  }\n  // addToChecklist(item: InventoryItem) {\n  //   // Check if the item is already in the checklist\n  //   const existingItem = this.checklistItems.find((checklistItem) => checklistItem.inventory_ItemId === item.inventory_ItemId);\n  //   if (existingItem) {\n  //     // Item already exists in the checklist, handle accordingly (e.g., show error message)\n  //     console.error('Item already exists in the checklist.');\n  //     return;\n  //   }\n  //   // Add the item to the checklist\n  //   this.checklistItems.push(item);\n  //   console.log('Item added to the checklist:', item);\n  // }\n  //Submit Stock Take \n  submitStockTake(stockTake) {\n    return this.httpClient.post(`${this.apiUrl}StockTake/SubmitStockTake`, stockTake);\n  }\n  getInventoryItemsByType(typeId) {\n    return this.httpClient.get(`${this.apiUrl}StockTake/${typeId}`);\n  }\n  SendEmail(item, predefinedLevel) {\n    console.log('ItemName:', item.itemName);\n    console.log('Quantity:', item.quantity);\n    // Make a request to the backend API to check inventory levels\n    // and send email notifications if necessary\n    return this.httpClient.post(`${this.apiUrl}SendNotification/SendEmail`, {}).pipe(catchError(error => {\n      console.error('Failed to send notification:', error);\n      return throwError(error);\n    }));\n  }\n  addToChecklist(item) {\n    // Check if the item is already in the checklist\n    const existingItem = this.checklistItems.find(checklistItem => checklistItem.inventory_ItemId === item.inventory_ItemId);\n    if (existingItem) {\n      // Item already exists in the checklist, update its properties (e.g., quantity)\n      existingItem.quantity = item.quantity;\n    } else {\n      // Add the item to the checklist\n      this.checklistItems.push(item);\n      console.log('Item added to the checklist:', item);\n    }\n    // Emit changes to the checklistItems\n    this.emitInventoryItemsChanged(this.checklistItems);\n  }\n  // ... Your existing code ...\n  emitInventoryItemsChanged(items) {\n    this.inventoryItemsChanged$.next(items);\n  }\n  // Observable to subscribe to changes in inventory items\n  get inventoryItemsChanged() {\n    return this.inventoryItemsChanged$.asObservable();\n  }\n  getSuppliersFromInventoryItem(item) {\n    // Implement a method to retrieve the suppliers related to the inventory item.\n    // For example, you can make an API call to get the suppliers based on item ID.\n    // Replace the URL with your actual API endpoint to fetch suppliers for the given item ID.\n    return this.httpClient.get(`${this.apiUrl}Suppliers/GetSuppliersByItemId/${item.inventory_ItemId}`).pipe(catchError(error => {\n      console.error('Error fetching suppliers:', error);\n      return [];\n    }));\n  }\n  GetAllSuppliers() {\n    return this.httpClient.get(`${this.apiUrl}Supplier/GetAllSuppliers`).pipe(map(result => result));\n  }\n  GetInventoryItemByName(itemName) {\n    return this.httpClient.get(`${this.apiUrl}InventoryItem/GetInventoryItemByName/${itemName}`);\n  }\n  AddReceivedOrder(receiveorder) {\n    return this.httpClient.post(`${this.apiUrl}InventoryItem/AddReceivedOrder`, receiveorder, this.httpOptions);\n  }\n  GetAllInventoryOrders() {\n    return this.httpClient.get(`${this.apiUrl}InventoryItem/GetAllInventoryOrders`).pipe(map(result => result));\n  }\n}\nInventoryService.ɵfac = function InventoryService_Factory(t) {\n  return new (t || InventoryService)(i0.ɵɵinject(i1.HttpClient));\n};\nInventoryService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: InventoryService,\n  factory: InventoryService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","catchError","map","Subject","throwError","InventoryService","constructor","httpClient","headers","ContentType","GetAllInventoryItems","get","apiUrl","pipe","result","GetInventoryItem","inventory_ItemId","DeleteInventoryItem","delete","httpOptions","EditInventoryItem","inventoryitem","put","AddInventoryItem","post","error","console","UpdateInventoryItem","updatedItemIndex","inventoryItems","findIndex","item","log","GetAllInventoryTypes","GetInventoryType","inventory_TypeId","DeleteInventoryType","EditInventoryType","inventorytype","AddInventoryType","GetInventoryItemsByType","addItem","checklistItems","push","getChecklistItems","submitStockTake","stockTake","getInventoryItemsByType","typeId","SendEmail","predefinedLevel","itemName","quantity","addToChecklist","existingItem","find","checklistItem","emitInventoryItemsChanged","items","inventoryItemsChanged$","next","inventoryItemsChanged","asObservable","getSuppliersFromInventoryItem","GetAllSuppliers","GetInventoryItemByName","AddReceivedOrder","receiveorder","GetAllInventoryOrders","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Lavania Naidoo\\Desktop\\370development-team-24\\Africanacity_Frontend\\src\\app\\service\\inventory.service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { catchError, map, Observable, Subject, throwError } from 'rxjs';\r\nimport { InventoryType } from '../shared/inventorytype';\r\nimport { InventoryItem } from '../shared/inventoryitem';\r\nimport { StockTake } from '../shared/stocktake';\r\nimport { BehaviorSubject} from 'rxjs';\r\nimport { Supplier } from '../shared/supplier';\r\nimport { Supplier_Inventory } from '../shared/supplieritem';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n  })\r\n  export class InventoryService {\r\n  \r\n    apiUrl = 'http://localhost:49991/api/'\r\n    private inventoryItems: InventoryItem[] = [];\r\n    private checklistItems: InventoryItem[] = [];\r\n    // private inventoryItemsChanged$ = new BehaviorSubject<InventoryItem[]>([]);\r\n    public inventoryItemsChanged$ = new Subject<InventoryItem[]>();\r\n\r\n  // ... Your existing code ...\r\n  \r\n  \r\n    httpOptions ={\r\n      headers: new HttpHeaders({\r\n        ContentType: 'application/json'\r\n      })\r\n    }\r\n\r\n    constructor(private httpClient: HttpClient) { \r\n    }\r\n    //Get All Inventory Items\r\n    GetAllInventoryItems(): Observable<any>{\r\n        return this.httpClient.get(`${this.apiUrl}InventoryItem/GetAllInventoryItems`)\r\n        .pipe(map(result => result))\r\n      }\r\n\r\n      GetInventoryItem(inventory_ItemId: number) {\r\n        return this.httpClient.get(`${this.apiUrl}InventoryItem/GetInventoryItem` + \"/\" + inventory_ItemId)\r\n        .pipe(map(result => result))\r\n      }\r\n\r\n      DeleteInventoryItem(inventory_ItemId: Number)\r\n      {\r\n        return this.httpClient.delete<string>(`${this.apiUrl}InventoryItem/DeleteInventoryItem` + \"/\" + inventory_ItemId, this.httpOptions)\r\n      }\r\n\r\n      // EditSupplier(supplierId: Number, supplier: Supplier)\r\n      // {\r\n      //   return this.httpClient.put(`${this.apiUrl}Supplier/EditSupplier/${supplierId}`,supplier, this.httpOptions)\r\n      // }\r\n\r\n      EditInventoryItem(inventory_ItemId: number, inventoryitem: InventoryItem): Observable<any> {\r\n        const httpOptions = {\r\n          headers: new HttpHeaders({\r\n            'Content-Type': 'application/json'\r\n          })\r\n        };\r\n        return this.httpClient.put(`${this.apiUrl}InventoryItem/EditInventoryItem/${inventory_ItemId}`, inventoryitem, httpOptions);\r\n      }\r\n\r\n      AddInventoryItem(inventoryitem: InventoryItem) {\r\n        return this.httpClient.post(`${this.apiUrl}InventoryItem/AddInventoryItem`, inventoryitem, this.httpOptions)\r\n          .pipe(\r\n            catchError(error => {\r\n              console.error('Error adding inventory item:', error);\r\n              return throwError(error);\r\n            })\r\n          );\r\n      }\r\n\r\n      UpdateInventoryItem(inventory_ItemId: number, inventoryitem: InventoryItem): Observable<any> {\r\n        // Perform client-side operations or validations here\r\n        // Update the item locally\r\n    \r\n        const updatedItemIndex = this.inventoryItems.findIndex(item => item.inventory_ItemId === inventory_ItemId);\r\n        if (updatedItemIndex !== -1) {\r\n          this.inventoryItems[updatedItemIndex] = inventoryitem;\r\n          console.log('Inventory item updated successfully.'); // Success message\r\n        } else {\r\n          console.log('Failed to update inventory item: Item not found.'); // Error message\r\n        }\r\n    \r\n        const httpOptions = {\r\n          headers: new HttpHeaders({\r\n            'Content-Type': 'application/json'\r\n          })\r\n        };\r\n    \r\n        return this.httpClient.put(`${this.apiUrl}InventoryItem/UpdateItems/${inventory_ItemId}`, inventoryitem, httpOptions);\r\n      }\r\n\r\n    // Get Inventory Types\r\n\r\n    GetAllInventoryTypes(): Observable<any>{\r\n      return this.httpClient.get(`${this.apiUrl}InventoryType/GetAllInventoryTypes`)\r\n      .pipe(map(result => result))\r\n    }\r\n    \r\n\r\n    GetInventoryType(inventory_TypeId: Number) {\r\n      return this.httpClient.get(`${this.apiUrl}InventoryType/GetInventoryType` + \"/\" + inventory_TypeId)\r\n      .pipe(map(result => result))\r\n    }\r\n    \r\n    DeleteInventoryType(inventory_TypeId: Number)\r\n    {\r\n      return this.httpClient.delete<string>(`${this.apiUrl}InventoryType/DeleteInventoryType` + \"/\" + inventory_TypeId, this.httpOptions)\r\n    }\r\n\r\n    EditInventoryType(inventory_TypeId: number, inventorytype: InventoryType)\r\n    {\r\n      return this.httpClient.put(`${this.apiUrl}InventoryType/EditInventoryType/${inventory_TypeId}`,inventorytype, this.httpOptions)\r\n    }\r\n\r\n    AddInventoryType(inventorytype: InventoryType)\r\n    {\r\n       return this.httpClient.post(`${this.apiUrl}InventoryType/AddInventoryType`, inventorytype, this.httpOptions)\r\n    }\r\n  \r\n    GetInventoryItemsByType(inventory_TypeId: number): Observable<InventoryItem[]> {\r\n      return this.httpClient.get<InventoryItem[]>(`${this.apiUrl}InventoryItem/items/${inventory_TypeId}`)\r\n        .pipe(\r\n          catchError(error => {\r\n            console.error('Error retrieving inventory items:', error);\r\n            return throwError(error);\r\n          })\r\n        );\r\n    }\r\n\r\n    addItem(item: InventoryItem) {\r\n      this.checklistItems.push(item);\r\n    }\r\n\r\n    getChecklistItems(): InventoryItem[] {\r\n      return this.checklistItems;\r\n    }\r\n    \r\n    // addToChecklist(item: InventoryItem) {\r\n    //   // Check if the item is already in the checklist\r\n    //   const existingItem = this.checklistItems.find((checklistItem) => checklistItem.inventory_ItemId === item.inventory_ItemId);\r\n    //   if (existingItem) {\r\n    //     // Item already exists in the checklist, handle accordingly (e.g., show error message)\r\n    //     console.error('Item already exists in the checklist.');\r\n    //     return;\r\n    //   }\r\n  \r\n    //   // Add the item to the checklist\r\n    //   this.checklistItems.push(item);\r\n    //   console.log('Item added to the checklist:', item);\r\n    // }\r\n\r\n    //Submit Stock Take \r\n \r\n    submitStockTake(stockTake: StockTake): Observable<any> {\r\n      return this.httpClient.post<any>(`${this.apiUrl}StockTake/SubmitStockTake`, stockTake);\r\n    }\r\n\r\n    getInventoryItemsByType(typeId: number): Observable<InventoryItem[]> {\r\n      return this.httpClient.get<InventoryItem[]>(`${this.apiUrl}StockTake/${typeId}`);\r\n    }\r\n\r\n    SendEmail(item: InventoryItem, predefinedLevel: number) {\r\n      console.log('ItemName:', item.itemName);\r\n      console.log('Quantity:', item.quantity);\r\n      // Make a request to the backend API to check inventory levels\r\n      // and send email notifications if necessary\r\n      return this.httpClient.post(`${this.apiUrl}SendNotification/SendEmail`, {}).pipe(\r\n        catchError((error) => {\r\n          console.error('Failed to send notification:', error);\r\n          return throwError(error);\r\n        })\r\n      );\r\n    }\r\n    addToChecklist(item: InventoryItem) {\r\n      // Check if the item is already in the checklist\r\n      const existingItem = this.checklistItems.find(\r\n        (checklistItem) => checklistItem.inventory_ItemId === item.inventory_ItemId\r\n      );\r\n      if (existingItem) {\r\n        // Item already exists in the checklist, update its properties (e.g., quantity)\r\n        existingItem.quantity = item.quantity;\r\n      } else {\r\n        // Add the item to the checklist\r\n        this.checklistItems.push(item);\r\n        console.log('Item added to the checklist:', item);\r\n      }\r\n  \r\n      // Emit changes to the checklistItems\r\n      this.emitInventoryItemsChanged(this.checklistItems);\r\n    }\r\n    \r\n  \r\n    // ... Your existing code ...\r\n  \r\n    emitInventoryItemsChanged(items: InventoryItem[]) {\r\n      this.inventoryItemsChanged$.next(items);\r\n    }\r\n  \r\n    // Observable to subscribe to changes in inventory items\r\n    get inventoryItemsChanged(): Observable<InventoryItem[]> {\r\n      return this.inventoryItemsChanged$.asObservable();\r\n    }\r\n\r\n    getSuppliersFromInventoryItem(item: InventoryItem): Observable<Supplier[]> {\r\n      // Implement a method to retrieve the suppliers related to the inventory item.\r\n      // For example, you can make an API call to get the suppliers based on item ID.\r\n      // Replace the URL with your actual API endpoint to fetch suppliers for the given item ID.\r\n      return this.httpClient.get<Supplier[]>(`${this.apiUrl}Suppliers/GetSuppliersByItemId/${item.inventory_ItemId}`)\r\n        .pipe(\r\n          catchError(error => {\r\n            console.error('Error fetching suppliers:', error);\r\n            return [];\r\n          })\r\n        );\r\n    }\r\n\r\n    GetAllSuppliers(): Observable<any>{\r\n      return this.httpClient.get(`${this.apiUrl}Supplier/GetAllSuppliers`)\r\n      .pipe(map(result => result))\r\n    }\r\n    \r\n    GetInventoryItemByName(itemName: string): Observable<InventoryItem> {\r\n      return this.httpClient.get<InventoryItem>(`${this.apiUrl}InventoryItem/GetInventoryItemByName/${itemName}`);\r\n    }\r\n\r\n    AddReceivedOrder(receiveorder: Supplier_Inventory): Observable<any> {\r\n      return this.httpClient.post(`${this.apiUrl}InventoryItem/AddReceivedOrder`, receiveorder, this.httpOptions);\r\n    }\r\n  \r\n    GetAllInventoryOrders(): Observable<Supplier_Inventory[]> {\r\n      return this.httpClient.get<Supplier_Inventory[]>(`${this.apiUrl}InventoryItem/GetAllInventoryOrders`)\r\n        .pipe(map(result => result));\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}